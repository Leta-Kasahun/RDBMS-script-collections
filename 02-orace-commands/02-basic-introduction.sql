CREATE USER employees IDENTIFIED BY emp_password;
GRANT CONNECT, RESOURCE TO employees;

CREATE TABLE departments (
    department_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    department_name VARCHAR2(50) NOT NULL,
    location VARCHAR2(50)
);

CREATE TABLE jobs (
    job_id VARCHAR2(10) PRIMARY KEY,
    job_title VARCHAR2(50) NOT NULL,
    min_salary NUMBER,
    max_salary NUMBER
);

CREATE TABLE employees (
    employee_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    first_name VARCHAR2(50),
    last_name VARCHAR2(50) NOT NULL,
    email VARCHAR2(100) UNIQUE NOT NULL,
    phone_number VARCHAR2(20),
    hire_date DATE NOT NULL,
    job_id VARCHAR2(10) NOT NULL,
    salary NUMBER CHECK (salary > 0),
    manager_id NUMBER,
    department_id NUMBER,
    CONSTRAINT fk_job FOREIGN KEY (job_id) REFERENCES jobs(job_id),
    CONSTRAINT fk_manager FOREIGN KEY (manager_id) REFERENCES employees(employee_id),
    CONSTRAINT fk_department FOREIGN KEY (department_id) REFERENCES departments(department_id)
);

CREATE TABLE job_history (
    employee_id NUMBER NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    job_id VARCHAR2(10) NOT NULL,
    department_id NUMBER NOT NULL,
    PRIMARY KEY (employee_id, start_date),
    CONSTRAINT fk_jh_employee FOREIGN KEY (employee_id) REFERENCES employees(employee_id),
    CONSTRAINT fk_jh_job FOREIGN KEY (job_id) REFERENCES jobs(job_id),
    CONSTRAINT fk_jh_department FOREIGN KEY (department_id) REFERENCES departments(department_id)
);

CREATE TABLE locations (
    location_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    street_address VARCHAR2(100),
    postal_code VARCHAR2(20),
    city VARCHAR2(50) NOT NULL,
    state_province VARCHAR2(50),
    country_id VARCHAR2(2) NOT NULL
);

INSERT INTO departments (department_name, location) VALUES ('HR', 'New York');
INSERT INTO departments (department_name, location) VALUES ('IT', 'San Francisco');
INSERT INTO departments (department_name, location) VALUES ('Finance', 'Chicago');
INSERT INTO departments (department_name, location) VALUES ('Marketing', 'Boston');
INSERT INTO departments (department_name, location) VALUES ('Operations', 'Seattle');
INSERT INTO departments (department_name, location) VALUES ('Sales', 'Denver');
INSERT INTO departments (department_name, location) VALUES ('Support', 'Austin');
INSERT INTO departments (department_name, location) VALUES ('Legal', 'Washington');
INSERT INTO departments (department_name, location) VALUES ('Admin', 'Miami');
INSERT INTO departments (department_name, location) VALUES ('Research', 'Atlanta');

INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('DEV', 'Developer', 50000, 120000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('HRM', 'HR Manager', 60000, 130000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('ACC', 'Accountant', 40000, 100000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('MKT', 'Marketing Specialist', 45000, 110000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('OPS', 'Operations Analyst', 48000, 115000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('SLS', 'Sales Representative', 35000, 90000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('SPT', 'Support Engineer', 40000, 95000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('LGL', 'Legal Advisor', 70000, 140000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('ADM', 'Administrator', 30000, 85000);
INSERT INTO jobs (job_id, job_title, min_salary, max_salary) VALUES ('RSD', 'Researcher', 50000, 125000);

INSERT INTO employees (first_name, last_name, email, phone_number, hire_date, job_id, salary, manager_id, department_id) VALUES
('John', 'Doe', 'john.doe@example.com', '123-456-7890', TO_DATE('2020-01-15', 'YYYY-MM-DD'), 'DEV', 85000, NULL, 2),
('Jane', 'Smith', 'jane.smith@example.com', '234-567-8901', TO_DATE('2019-03-22', 'YYYY-MM-DD'), 'HRM', 95000, NULL, 1),
('Michael', 'Brown', 'michael.brown@example.com', '345-678-9012', TO_DATE('2018-07-10', 'YYYY-MM-DD'), 'ACC', 70000, NULL, 3),
('Emily', 'Davis', 'emily.davis@example.com', '456-789-0123', TO_DATE('2021-05-18', 'YYYY-MM-DD'), 'MKT', 65000, 2, 4),
('William', 'Wilson', 'william.wilson@example.com', '567-890-1234', TO_DATE('2017-11-25', 'YYYY-MM-DD'), 'OPS', 72000, 3, 5),
('Olivia', 'Moore', 'olivia.moore@example.com', '678-901-2345', TO_DATE('2020-09-09', 'YYYY-MM-DD'), 'SLS', 48000, 2, 6),
('James', 'Taylor', 'james.taylor@example.com', '789-012-3456', TO_DATE('2019-12-01', 'YYYY-MM-DD'), 'SPT', 53000, 3, 7),
('Isabella', 'Anderson', 'isabella.anderson@example.com', '890-123-4567', TO_DATE('2018-02-14', 'YYYY-MM-DD'), 'LGL', 75000, NULL, 8),
('Liam', 'Thomas', 'liam.thomas@example.com', '901-234-5678', TO_DATE('2021-08-30', 'YYYY-MM-DD'), 'ADM', 40000, 2, 9),
('Sophia', 'Jackson', 'sophia.jackson@example.com', '012-345-6789', TO_DATE('2017-04-20', 'YYYY-MM-DD'), 'RSD', 90000, NULL, 10);

INSERT INTO job_history (employee_id, start_date, end_date, job_id, department_id) VALUES
(1, TO_DATE('2018-01-01','YYYY-MM-DD'), TO_DATE('2019-12-31','YYYY-MM-DD'), 'DEV', 2),
(2, TO_DATE('2016-05-01','YYYY-MM-DD'), TO_DATE('2019-03-21','YYYY-MM-DD'), 'HRM', 1),
(3, TO_DATE('2015-03-01','YYYY-MM-DD'), TO_DATE('2018-07-09','YYYY-MM-DD'), 'ACC', 3),
(4, TO_DATE('2020-01-01','YYYY-MM-DD'), TO_DATE('2021-05-17','YYYY-MM-DD'), 'MKT', 4),
(5, TO_DATE('2016-11-01','YYYY-MM-DD'), TO_DATE('2017-11-24','YYYY-MM-DD'), 'OPS', 5),
(6, TO_DATE('2019-01-01','YYYY-MM-DD'), TO_DATE('2020-09-08','YYYY-MM-DD'), 'SLS', 6),
(7, TO_DATE('2017-06-01','YYYY-MM-DD'), TO_DATE('2019-11-30','YYYY-MM-DD'), 'SPT', 7),
(8, TO_DATE('2016-09-01','YYYY-MM-DD'), TO_DATE('2018-02-13','YYYY-MM-DD'), 'LGL', 8),
(9, TO_DATE('2020-01-01','YYYY-MM-DD'), TO_DATE('2021-08-29','YYYY-MM-DD'), 'ADM', 9),
(10, TO_DATE('2015-01-01','YYYY-MM-DD'), TO_DATE('2017-04-19','YYYY-MM-DD'), 'RSD', 10);

INSERT INTO locations (street_address, postal_code, city, state_province, country_id) VALUES
('123 Main St', '10001', 'New York', 'NY', 'US'),
('456 Market St', '94105', 'San Francisco', 'CA', 'US'),
('789 Lake Shore Dr', '60601', 'Chicago', 'IL', 'US'),
('321 Broadway', '02115', 'Boston', 'MA', 'US'),
('654 Pine St', '98101', 'Seattle', 'WA', 'US'),
('987 Elm St', '80202', 'Denver', 'CO', 'US'),
('159 Oak St', '78701', 'Austin', 'TX', 'US'),
('753 Maple Ave', '20001', 'Washington', 'DC', 'US'),
('852 Palm St', '33101', 'Miami', 'FL', 'US'),
('951 Cedar Blvd', '30301', 'Atlanta', 'GA', 'US');
